<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ˆì´í˜ì´ì§€ - ë…¼ìŸì˜ íƒ‘</title>
    <style>
        /* 1. ë°°ê²½ í™”ì´íŠ¸ ë° í…ìŠ¤íŠ¸ ê²€ì • ì„¤ì • */
        body { margin: 0; background-color: #ffffff; font-family: 'Pretendard', sans-serif; color: #333333; }
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            display: flex; flex-direction: column; padding: 60px 20px; box-sizing: border-box;
            background-color: #ffffff;
        }
        .header { display: flex; align-items: center; margin-bottom: 30px; }
        .back-btn { font-size: 28px; color: #333; text-decoration: none; margin-right: 15px; font-weight: bold; }

        /* í”„ë¡œí•„ ì¹´ë“œ (í™”ì´íŠ¸ í…Œë§ˆì— ë§ì¶° ë°ê²Œ ì¡°ì •) */
        .profile-card { 
            background: #fdf7ff; border: 1px solid #e0aaff; 
            padding: 25px; border-radius: 20px; text-align: center; margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(157, 78, 221, 0.1);
        }
        .user-rank { font-size: 14px; color: #9d4edd; font-weight: bold; margin-bottom: 5px; display: block; }
        .user-name { font-size: 22px; font-weight: bold; color: #222; margin-bottom: 5px; display: block; }
        
        .user-lp { font-size: 13px; color: #666; font-weight: bold; margin-bottom: 15px; display: block; }

        /* í†µí•© ì½”ì¸ ë°•ìŠ¤ */
        .coin-box { 
            background: #ffffff; padding: 20px; border-radius: 15px; 
            border: 1px solid #ffd700; text-align: center; margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.2);
        }
        .coin-label { font-size: 13px; color: #b8860b; margin-bottom: 10px; font-weight: bold; }
        .coin-value { font-size: 28px; font-weight: bold; color: #333; }

        /* ë²„íŠ¼ */
        .action-btn { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; font-size: 14px; margin-bottom: 10px; }
        .btn-outline { background: #ffffff; color: #555; border: 1px solid #ddd; transition: 0.2s; }
        .btn-outline:active { background: #f5f5f5; }

        /* íƒ­ ë©”ë‰´ */
        .tab-menu { display: flex; gap: 20px; margin-top: 25px; border-bottom: 1px solid #eee; }
        .tab { padding: 10px 5px; cursor: pointer; color: #999; font-size: 15px; font-weight: bold; }
        .tab.active { color: #333; border-bottom: 2px solid #333; }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: #fff; width: 85%; max-width: 350px; padding: 25px; border-radius: 20px; color: #333; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="header">
            <a href="main.html" class="back-btn">â€¹</a>
            <h1 style="font-size: 20px; margin: 0; color: #222;">ë‚˜ì˜ ì¬íŒ ê¸°ë¡</h1>
        </div>

        <div class="profile-card">
            <span id="rankBadge" class="user-rank">Lv.1 ì‹ ì… ë°°ì‹¬ì›</span>
            <span class="user-name">ì •ì˜ë¡œìš´ ë°°ì‹¬ì› ë‹˜</span>
            
            <span class="user-lp">ëˆ„ì  ì ìˆ˜: <span id="myLPDisplay">0</span> LP</span>
            
            <div class="coin-box">
                <div class="coin-label">ë‚´ ë³´ìœ  ì½”ì¸</div>
                <div class="coin-value">ğŸŸ¡ <span id="myCoinDisplay">0</span></div>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="action-btn btn-outline" onclick="openModal('rankModal')">ğŸ“Š ë“±ê¸‰í‘œ</button>
                <button class="action-btn btn-outline" onclick="openModal('coinModal')">ğŸŸ¡ ì½”ì¸ ê°€ì´ë“œ</button>
            </div>
        </div>

        <div class="tab-menu">
            <div id="tabMy" class="tab active" onclick="switchTab('my')">ë‚´ê°€ ì“´ ê¸€</div>
            <div id="tabVoted" class="tab" onclick="switchTab('voted')">ì°¸ì—¬í•œ íŒê²°</div>
        </div>
        <div id="recordList" style="margin-top: 20px;"></div>
    </div>

    <div id="rankModal" class="modal">
        <div class="modal-content" style="border: 1px solid #9d4edd;">
            <h3 style="text-align:center; color:#9d4edd;">ğŸ›ï¸ ë“±ê¸‰ ê¸°ì¤€</h3>
            <table style="width:100%; color:#333; font-size:13px; margin-bottom:15px; border-collapse: collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.1 ì‹ ì… ë°°ì‹¬ì›</td><td style="text-align:right;">0+</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.2 ì‚¬ë²•ì—°ìˆ˜ìƒ</td><td style="text-align:right;">1,000+</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.3 í‰íŒì‚¬</td><td style="text-align:right;">5,000+</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.4 ë¶€ì¥íŒì‚¬</td><td style="text-align:right;">15,000+</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.5 ëª…ì˜ˆ ëŒ€ë²•ê´€</td><td style="text-align:right;">50,000+</td></tr>
            </table>
            <div style="font-size: 12px; color: #666; line-height: 1.6; background: #f9f9f9; padding: 15px; border-radius: 10px; margin-top: 10px;">
                <b style="color: #9d4edd;">ğŸ’¡ ì ìˆ˜(LP) íšë“ ë°©ë²•</b><br>
                - íŒê²° ì„±ê³µ(ë‹¤ìˆ˜ê²° ìŠ¹ë¦¬): <span style="color:#222;">+100 LP</span><br>
                - íˆ¬í‘œ ì°¸ì—¬: <span style="color:#222;">+10 LP</span><br>
                - ëŒ“ê¸€ ì‘ì„±: <span style="color:#222;">+20 LP</span><br>
                - ë² ìŠ¤íŠ¸ ëŒ“ê¸€ ì„ ì •: <span style="color:#222;">+200 LP</span>
            </div>
            <button class="action-btn" style="background:#9d4edd; color:white; margin-top:15px;" onclick="closeModal('rankModal')">í™•ì¸</button>
        </div>
    </div>

    <div id="coinModal" class="modal">
        <div class="modal-content" style="border: 1px solid #ffd700;">
            <h3 style="text-align:center; color:#b8860b;">ğŸŸ¡ ì½”ì¸ ì´ìš© ê°€ì´ë“œ</h3>
            <div style="font-size: 13px; line-height: 1.8; color: #444;">
                â€¢ <b>íšë“:</b> íˆ¬í‘œ ë° ëŒ“ê¸€ ì°¸ì—¬ ì‹œ <b>+30ê°œ</b><br>
                â€¢ <b>ìˆ˜ëŸ‰:</b> ì¼ì¼ íšë“ ì œí•œ <b>ì—†ìŒ (ë¬´ì œí•œ)</b><br><br>
                â€¢ <b>ì‚¬ê±´ ì ‘ìˆ˜:</b> ì§ˆë¬¸ ë“±ë¡ ì‹œ <b>-100ê°œ</b><br>
                â€¢ <b>ìµœì¢… ì¬ì‹¬:</b> ì¢…ë£Œëœ ì‚¬ê±´ ì¬ì‹¬ ì‹ ì²­ ì‹œ <b>-300ê°œ</b>
            </div>
            <button class="action-btn" style="background:#ffd700; color:#000; margin-top:20px;" onclick="closeModal('coinModal')">í™•ì¸</button>
        </div>
    </div>

    <script>
        let currentTab = 'my';

        function initUserData() {
            let userData = JSON.parse(localStorage.getItem('userData')) || { 
                coin: 1000, dailyEarned: 0, lastUpdateDate: new Date().toDateString() 
            };
            const today = new Date().toDateString();
            if (userData.lastUpdateDate !== today) {
                userData.dailyEarned = 0;
                userData.lastUpdateDate = today;
                localStorage.setItem('userData', JSON.stringify(userData));
            }
            return userData;
        }

        function refreshUI() {
            const user = initUserData();
            document.getElementById('myCoinDisplay').innerText = user.coin.toLocaleString();

            const points = parseInt(localStorage.getItem('userPoints') || '0');
            document.getElementById('myLPDisplay').innerText = points.toLocaleString();

            updateRankBadge(points);
            renderRecords();
        }

        function updateRankBadge(lp) {
            const badge = document.getElementById('rankBadge');
            let rankName = "Lv.1 ì‹ ì… ë°°ì‹¬ì›";
            if (lp >= 50000) rankName = "Lv.5 ëª…ì˜ˆ ëŒ€ë²•ê´€";
            else if (lp >= 15000) rankName = "Lv.4 ë¶€ì¥íŒì‚¬";
            else if (lp >= 5000) rankName = "Lv.3 í‰íŒì‚¬";
            else if (lp >= 1000) rankName = "Lv.2 ì‚¬ë²•ì—°ìˆ˜ìƒ";
            
            badge.innerText = rankName;
        }

        function renderRecords() {
            const listContainer = document.getElementById('recordList');
            const allCases = JSON.parse(localStorage.getItem('myCases') || '[]');
            listContainer.innerHTML = '';
            let filteredList = (currentTab === 'my') ? allCases : allCases.filter(c => c.voted === true);
            
            if (filteredList.length === 0) {
                listContainer.innerHTML = '<p style="text-align:center; color:#aaa; margin-top:50px; font-size:14px;">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            filteredList.forEach(item => {
                listContainer.insertAdjacentHTML('beforeend', `
                    <div style="background:#ffffff; padding:18px; border-radius:15px; margin-bottom:12px; cursor:pointer; border:1px solid #eee; box-shadow: 0 2px 5px rgba(0,0,0,0.02);" onclick="location.href='detail.html?id=${item.id}'">
                        <div style="font-weight:bold; color:#333;">${item.title}</div>
                        <div style="font-size:12px; color:#9d4edd; margin-top:8px; font-weight:600;">ìƒì„¸ ë³´ê¸° ></div>
                    </div>
                `);
            });
        }

        function switchTab(type) {
            currentTab = type;
            document.getElementById('tabMy').classList.toggle('active', type === 'my');
            document.getElementById('tabVoted').classList.toggle('active', type === 'voted');
            renderRecords();
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        window.onload = refreshUI;
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ê±´ ìƒì„¸ - ë…¼ìŸì˜ íƒ‘</title>
    <style>
        body { margin: 0; background-color: #ffffff; font-family: 'Pretendard', sans-serif; color: #333333; }
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            display: flex; flex-direction: column; padding: 60px 20px; box-sizing: border-box;
            background-color: #ffffff;
        }
        .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
        .back-btn { font-size: 28px; color: #333; text-decoration: none; font-weight: bold; }
        .coin-status { background: #f8f9fa; padding: 5px 12px; border-radius: 15px; border: 1px solid #ffd700; font-size: 13px; color: #333; }
        .case-card { background: #ffffff; border-radius: 20px; padding: 25px; margin-bottom: 20px; border: 1px solid #eeeeee; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .case-title { font-size: 20px; font-weight: bold; margin-bottom: 15px; color: #b8860b; }
        .case-content { font-size: 15px; line-height: 1.7; color: #444; white-space: pre-wrap; margin-bottom: 20px; }
        .vote-section { display: flex; gap: 10px; margin-bottom: 30px; flex-direction: row; flex-wrap: wrap; }
        .vote-btn { flex: 1; padding: 20px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.2s; }
        .btn-my { background: #ff4d4d; color: white; }
        .btn-your { background: #4d94ff; color: white; }
        .result-container { width: 100%; background: #f8f9fa; padding: 20px; border-radius: 15px; border: 1px solid #eee; box-sizing: border-box; }
        .result-label { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; font-size: 14px; }
        .gauge-bar { width: 100%; height: 12px; background: #eee; border-radius: 6px; display: flex; overflow: hidden; }
        .gauge-my { background: #ff4d4d; transition: width 0.5s ease; }
        .gauge-your { background: #4d94ff; transition: width 0.5s ease; }
        
        /* ì¶”ê°€ëœ ê³µìœ  ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .share-button-container { margin-top: 15px; text-align: center; }
        .btn-share-result { 
            width: 100%; padding: 15px; border-radius: 12px; border: none; 
            background: #b8860b; color: white; font-weight: bold; font-size: 15px;
            cursor: pointer; box-shadow: 0 4px 10px rgba(184, 134, 11, 0.2);
            transition: transform 0.1s;
        }
        .btn-share-result:active { transform: scale(0.98); }

        .comment-section { border-top: 1px solid #eeeeee; padding-top: 20px; }
        .comment-input-group { display: flex; flex-direction: column; gap: 8px; margin-bottom: 20px; }
        .comment-input { width: 100%; background: #f9f9f9; border: 1px solid #dddddd; border-radius: 10px; padding: 12px; color: #333; box-sizing: border-box; font-family: inherit; }
        .comment-footer { display: flex; justify-content: space-between; align-items: center; }
        .char-count { font-size: 12px; color: #999; }
        .comment-submit { background: #ffd700; color: #000; border: none; padding: 10px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; }
        
        .comment-item { background: #f1f1f1; padding: 15px; border-radius: 10px; margin-bottom: 10px; font-size: 14px; color: #333; position: relative; }
        .comment-best-badge { background: #ffd700; color: #000; font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: bold; margin-bottom: 5px; display: inline-block; }
        .like-btn { background: #fff; border: 1px solid #ddd; border-radius: 15px; padding: 4px 10px; font-size: 12px; cursor: pointer; float: right; transition: 0.2s; }
        .like-btn.liked { border-color: #ff4d4d; background: #fff1f1; color: #ff4d4d; }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="header">
            <a href="list.html" class="back-btn">â€¹</a>
            <div class="coin-status">ğŸŸ¡ <span id="topCoin">0</span></div>
        </div>

        <div id="caseDetail" class="case-card">
            <div class="case-title" id="displayTitle">ë¡œë”© ì¤‘...</div>
            <div class="case-content" id="displayContent">ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.</div>
        </div>

        <div class="vote-section" id="voteSection">
            <button class="vote-btn btn-my" onclick="handleVote('my')">ë‚´ íƒ“</button>
            <button class="vote-btn btn-your" onclick="handleVote('your')">ë„¤ íƒ“</button>
        </div>

        <div class="comment-section">
            <h4 style="margin-bottom:15px; color:#222;">ğŸ’¬ ëŒ“ê¸€ (ìµœëŒ€ 3ê°œ ë³´ìƒ)</h4>
            <div class="comment-input-group">
                <textarea id="commentInput" class="comment-input" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœëŒ€ 100ì)" maxlength="100" rows="3" oninput="updateCharCount()"></textarea>
                <div class="comment-footer">
                    <span class="char-count" id="charCount">0 / 100</span>
                    <button class="comment-submit" onclick="handleComment()">ë“±ë¡</button>
                </div>
            </div>
            <div id="commentList"></div>
        </div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const caseId = urlParams.get('id');
        let currentCase = null;

        function loadData() {
            const cases = JSON.parse(localStorage.getItem('myCases') || '[]');
            currentCase = cases.find(c => c.id == caseId);
            
            if (!currentCase) {
                alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ê±´ì…ë‹ˆë‹¤.");
                location.href = 'list.html';
                return;
            }

            document.getElementById('displayTitle').innerText = currentCase.title;
            document.getElementById('displayContent').innerText = currentCase.content;
            
            updateCoinUI();
            
            const now = Date.now();
            const isExpired = currentCase.endTime - now <= 0;

            if (isExpired && currentCase.voted && !currentCase.rewardCheckDone) {
                processFinalRewards();
            }

            if (currentCase.voted || isExpired) {
                renderResult(isExpired);
            }
            renderComments();
        }

        function processFinalRewards() {
            const cases = JSON.parse(localStorage.getItem('myCases') || '[]');
            const idx = cases.findIndex(c => c.id == caseId);
            let userPoints = parseInt(localStorage.getItem('userPoints') || '0');
            let messages = [];

            const myVotes = currentCase.voteCount.my || 0;
            const yourVotes = currentCase.voteCount.your || 0;
            let winner = myVotes > yourVotes ? 'my' : (yourVotes > myVotes ? 'your' : 'draw');

            if (currentCase.userChoice === winner || (winner === 'draw' && currentCase.voted)) {
                userPoints += 100;
                messages.push("âš–ï¸ íŒê²° ì„±ê³µ ë³´ìƒ (+100 LP)");
            }

            if (currentCase.comments && currentCase.comments.length > 0) {
                const sortedComments = [...currentCase.comments].sort((a, b) => {
                    if (b.likes !== a.likes) return b.likes - a.likes;
                    return a.time - b.time;
                });

                const top3Ids = sortedComments.slice(0, 3).map(c => c.commentId);
                const myBestComment = currentCase.comments.find(c => c.isMine && top3Ids.includes(c.commentId));
                
                if (myBestComment) {
                    userPoints += 200;
                    messages.push("â­ ë² ìŠ¤íŠ¸ ëŒ“ê¸€ ì„ ì • ë³´ìƒ (+200 LP)");
                    currentCase.comments.forEach(c => {
                        if (top3Ids.includes(c.commentId)) c.isBest = true;
                    });
                }
            }

            if (messages.length > 0) alert(messages.join('\n'));

            cases[idx].rewardCheckDone = true;
            cases[idx].comments = currentCase.comments;
            localStorage.setItem('userPoints', userPoints.toString());
            localStorage.setItem('myCases', JSON.stringify(cases));
            updateCoinUI();
        }

        function renderResult(isExpired) {
            const myVotes = currentCase.voteCount.my || 0;
            const yourVotes = currentCase.voteCount.your || 0;
            const total = myVotes + yourVotes;
            const myPercent = total === 0 ? 0 : Math.round((myVotes / total) * 100);
            const yourPercent = total === 0 ? 0 : Math.round((yourVotes / total) * 100);

            // ê²°ê³¼ì°½ ë Œë”ë§ + ë§ˆê° ì‹œ ê³µìœ  ë²„íŠ¼ ì¶”ê°€
            let resultHtml = `
                <div class="result-container">
                    <h4 style="text-align: center; margin: 0 0 15px 0; color: #222;">âš–ï¸ íŒê²° ê²°ê³¼</h4>
                    <div class="result-label">
                        <span style="color: #ff4d4d;">ë‚´ íƒ“: ${myVotes}í‘œ (${myPercent}%)</span>
                        <span style="color: #4d94ff;">ë„¤ íƒ“: ${yourVotes}í‘œ (${yourPercent}%)</span>
                    </div>
                    <div class="gauge-bar">
                        <div class="gauge-my" style="width: ${myPercent}%"></div>
                        <div class="gauge-your" style="width: ${yourPercent}%"></div>
                    </div>
                    <p style="text-align: center; font-size: 12px; color: #888; margin-top: 15px; margin-bottom: 0;">
                        ${isExpired ? "íŒê²°ì´ ë§ˆê°ëœ ì‚¬ê±´ì…ë‹ˆë‹¤." : "íˆ¬í‘œì— ì°¸ì—¬í•˜ì‹  ì‚¬ê±´ì…ë‹ˆë‹¤."}
                    </p>
                </div>
            `;

            // ë§ˆê°ëœ ì‚¬ê±´ì¼ ê²½ìš° 'ê²°ê³¼ ê³µìœ í•˜ê¸°' ë²„íŠ¼ ì¶”ê°€ ë…¸ì¶œ
            if (isExpired) {
                resultHtml += `
                    <div class="share-button-container">
                        <button class="btn-share-result" onclick="location.href='result.html?id=${currentCase.id}'">
                            ğŸ“¤ íŒê²° ê²°ê³¼ ê³µìœ  ë° ì´ë¯¸ì§€ ì €ì¥
                        </button>
                    </div>
                `;
            }

            document.getElementById('voteSection').innerHTML = resultHtml;
        }

        function handleVote(side) {
            const cases = JSON.parse(localStorage.getItem('myCases') || '[]');
            const idx = cases.findIndex(c => c.id == caseId);
            if (idx !== -1) {
                cases[idx].voted = true;
                cases[idx].userChoice = side;
                cases[idx].voteCount[side]++;
                localStorage.setItem('myCases', JSON.stringify(cases));
                awardReward('vote');
                location.reload();
            }
        }

        function handleComment() {
            const input = document.getElementById('commentInput');
            const content = input.value.trim();
            if (!content) return;

            const cases = JSON.parse(localStorage.getItem('myCases') || '[]');
            const idx = cases.findIndex(c => c.id == caseId);

            if (idx !== -1) {
                if (!cases[idx].comments) cases[idx].comments = [];
                if (!cases[idx].commentRewardCount) cases[idx].commentRewardCount = 0;

                const newComment = {
                    commentId: Date.now(),
                    text: content,
                    likes: 0,
                    likedUsers: [], 
                    time: Date.now(),
                    isMine: true,
                    isBest: false
                };

                if (cases[idx].commentRewardCount < 3) {
                    cases[idx].commentRewardCount++;
                    awardReward('comment');
                } else {
                    alert("ì´ ì‚¬ê±´ì˜ ëŒ“ê¸€ ë³´ìƒ(ìµœëŒ€ 3íšŒ)ì„ ëª¨ë‘ ë°›ìœ¼ì…¨ìŠµë‹ˆë‹¤.");
                }

                cases[idx].comments.push(newComment);
                localStorage.setItem('myCases', JSON.stringify(cases));
                input.value = '';
                updateCharCount();
                currentCase = cases[idx];
                renderComments();
            }
        }

        function toggleLike(commentId) {
            const cases = JSON.parse(localStorage.getItem('myCases') || '[]');
            const idx = cases.findIndex(c => c.id == caseId);
            const comment = cases[idx].comments.find(c => c.commentId === commentId);
            
            if (comment) {
                if (!comment.likedUsers) comment.likedUsers = [];
                if (comment.likedUsers.includes('me')) {
                    alert("ì´ë¯¸ ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥´ì…¨ìŠµë‹ˆë‹¤.");
                    return;
                }
                comment.likes = (comment.likes || 0) + 1;
                comment.likedUsers.push('me'); 
                localStorage.setItem('myCases', JSON.stringify(cases));
                currentCase = cases[idx];
                renderComments();
            }
        }

        function renderComments() {
            const list = document.getElementById('commentList');
            list.innerHTML = '';
            const comments = currentCase.comments || [];
            
            [...comments].reverse().forEach(c => {
                const bestBadge = c.isBest ? `<span class="comment-best-badge">â­ BEST</span><br>` : '';
                const isLiked = c.likedUsers && c.likedUsers.includes('me');
                const likedClass = isLiked ? 'liked' : '';

                list.insertAdjacentHTML('beforeend', `
                    <div class="comment-item">
                        ${bestBadge}
                        <button class="like-btn ${likedClass}" onclick="toggleLike(${c.commentId})">
                            ğŸ‘ ${c.likes}
                        </button>
                        ${c.text}
                    </div>
                `);
            });
        }

        function awardReward(type) {
            let userData = JSON.parse(localStorage.getItem('userData')) || { coin: 10000, dailyEarned: 0, lastUpdateDate: new Date().toDateString() };
            let userPoints = parseInt(localStorage.getItem('userPoints') || '0');
            const today = new Date().toDateString();

            if (userData.lastUpdateDate !== today) {
                userData.dailyEarned = 0;
                userData.lastUpdateDate = today;
            }

            let coinPlus = 10;
            let lpPlus = (type === 'vote') ? 10 : 20;

            if (userData.dailyEarned + coinPlus > 1000) coinPlus = Math.max(0, 1000 - userData.dailyEarned);

            userData.coin += coinPlus;
            userData.dailyEarned += coinPlus;
            userPoints += lpPlus;

            localStorage.setItem('userData', JSON.stringify(userData));
            localStorage.setItem('userPoints', userPoints.toString());
            updateCoinUI();
            if (coinPlus > 0) alert(`ğŸ ë³´ìƒ íšë“! (ê¸ˆìƒ‰ ì½”ì¸ +${coinPlus}, LP +${lpPlus})`);
        }

        function updateCoinUI() {
            const user = JSON.parse(localStorage.getItem('userData')) || { coin: 0 };
            document.getElementById('topCoin').innerText = user.coin.toLocaleString();
        }

        function updateCharCount() {
            const input = document.getElementById('commentInput');
            document.getElementById('charCount').innerText = `${input.value.length} / 100`;
        }

        window.onload = loadData;
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œë”© ì¤‘</title>
    <style>
        /* í™”ë©´ ì •ì¤‘ì•™ì— ë¡œë”©ë°”ë¥¼ ìœ„ì¹˜ì‹œí‚¤ëŠ” ì„¤ì • */
        body { 
            margin: 0; height: 100vh; 
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; 
            font-family: sans-serif; background-color: #ffffff;
        }
        /* ë¹™ê¸€ë¹™ê¸€ ë„ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
        .loader { 
            border: 5px solid #f3f3f3; border-top: 5px solid #FF4D4D; 
            border-radius: 50%; width: 50px; height: 50px; 
            animation: spin 1s linear infinite; margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .text { font-size: 20px; font-weight: bold; color: #333; }
    </style>
</head>
<body>
    <div class="loader"></div>
    <div class="text">ë‚´íƒ“ë„¤íƒ“ ë¡œë”© ì¤‘...</div>

    <script>
        // 2.5ì´ˆ ë’¤ì— ìë™ìœ¼ë¡œ main.html í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
        setTimeout(() => {
            window.location.href = 'main.html';
        }, 2500);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ê±´ ëª©ë¡ - ë‚´íƒ“ë„¤íƒ“</title>
    <style>
        body { 
            margin: 0; 
            background-color: #ffffff; 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; 
            color: #333333; 
        }
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            display: flex; flex-direction: column; padding: 50px 15px; box-sizing: border-box;
            background-color: #ffffff;
        }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .back-btn { font-size: 24px; color: #333; text-decoration: none; font-weight: bold; width: 30px; }
        .back-btn::before { content: 'â€¹'; }
        
        .archive-title { 
            font-size: 18px; 
            font-weight: 600; 
            color: #444; 
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .refresh-btn {
            background: none; border: none; font-size: 18px; cursor: pointer;
            width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;
            padding: 0; transition: transform 0.4s ease;
        }
        .refresh-btn.rotating { transform: rotate(360deg); }

        .case-card {
            background: #ffffff; 
            border-radius: 12px; 
            padding: 12px 15px; 
            margin-bottom: 10px; 
            border: 1px solid #f0f0f0; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.04); 
            cursor: pointer; 
            position: relative;
            /* ê°€ë¡œ ë°°ì¹˜ë¥¼ ìœ„í•œ flex ì¶”ê°€ */
            display: flex;
            align-items: flex-start;
        }

        /* ì•„ì´ë”” ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .author-area {
            width: 65px; /* ì•„ì´ë”” ë„ˆë¹„ ê³ ì • */
            flex-shrink: 0;
            font-size: 13px;
            font-weight: bold;
            color: #555;
            text-align: center;
            padding-top: 2px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* êµ¬ë¶„ì„  ìŠ¤íƒ€ì¼ */
        .divider {
            width: 1px;
            height: 40px;
            background-color: #eee;
            margin: 0 12px;
            flex-shrink: 0;
        }

        /* ë³¸ë¬¸ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .content-area {
            flex-grow: 1;
            min-width: 0; /* í…ìŠ¤íŠ¸ ìƒëµ ê¸°ëŠ¥ì„ ìœ„í•´ í•„ìš” */
        }
        
        .case-title { font-size: 15px; font-weight: bold; margin-bottom: 4px; color: #222222; padding-right: 50px; }
        .case-preview { 
            font-size: 12.5px; color: #777777; margin-bottom: 8px; 
            display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; 
        }
        
        .time-tag {
            position: absolute; top: 12px; right: 12px;
            font-size: 10px; font-weight: bold; padding: 3px 7px; border-radius: 4px;
            color: #ffffff !important;
        }
        .status-ing { background: #ff4d4d; }
        .status-end { background: #aaaaaa; }

        .case-footer { 
            display: flex; 
            justify-content: space-between; 
            font-size: 11px; 
            color: #9d4edd; 
            font-weight: 600; 
            border-top: 1px solid #fafafa;
            padding-top: 6px;
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="header">
            <a href="index.html" class="back-btn"></a>
            <div class="archive-title">ğŸ“œ ì‚¬ê±´ ì•„ì¹´ì´ë¸Œ</div>
            <button onclick="handleRefresh(this)" class="refresh-btn">ğŸ”„</button>
        </div>

        <div id="caseList"></div>
    </div>

    <script>
        function handleRefresh(btn) {
            btn.classList.add('rotating');
            renderList();
            setTimeout(() => {
                btn.classList.remove('rotating');
            }, 400);
        }

        function renderList() {
            const listContainer = document.getElementById('caseList');
            const savedCases = JSON.parse(localStorage.getItem('myCases') || '[]');

            if (savedCases.length === 0) {
                listContainer.innerHTML = '<p style="text-align:center; margin-top:100px; color:#aaa; font-size:14px;">ê¸°ë¡ëœ ì‚¬ê±´ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            listContainer.innerHTML = '';
            const now = Date.now();

            savedCases.forEach(item => {
                const diff = item.endTime - now;
                let timeText = "";
                let statusClass = "status-ing";

                if (diff <= 0) {
                    timeText = "íŒê²° ë§ˆê°";
                    statusClass = "status-end";
                } else {
                    const m = Math.floor(diff / 60000);
                    if (m < 1) timeText = "ê³§ ë§ˆê°";
                    else if (m >= 60) timeText = "1ì‹œê°„+";
                    else timeText = `${m}ë¶„`;
                }

                // ì‘ì„±ì ë‹‰ë„¤ì„ (ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ìµëª… í‘œì‹œ)
                const authorName = item.authorName || "ìµëª…";

                const html = `
                    <div class="case-card" onclick="location.href='detail.html?id=${item.id}'">
                        <div class="author-area">${authorName}</div>
                        <div class="divider"></div>
                        <div class="content-area">
                            <div class="time-tag ${statusClass}">${timeText}</div>
                            <div class="case-title">${item.title}</div>
                            <div class="case-preview">${item.content}</div>
                            <div class="case-footer">
                                <span>â¤ï¸ ${item.likes || 0}</span>
                                <span>âš–ï¸ ë°°ì‹¬ì› ì°¸ì—¬ ì¤‘</span>
                            </div>
                        </div>
                    </div>
                `;
                listContainer.insertAdjacentHTML('beforeend', html);
            });
        }

        setInterval(renderList, 60000);
        renderList();
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ì¸ - ë‚´íƒ“ë„¤íƒ“</title>
    <style>
        /* 1. ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì„¤ì • */
        body { margin: 0; background-color: #ffffff; font-family: 'Pretendard', sans-serif; color: #333333; }
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 40px; box-sizing: border-box;
        }

        /* 2. ë¡œê³  ë° íƒ€ì´í‹€ ìˆ˜ì • */
        .logo-area { text-align: center; margin-bottom: 50px; }
        
        /* ì €ìš¸ ì´ëª¨í‹°ì½˜ ì¤‘ì•™ ë°°ì¹˜ */
        .logo-icon { font-size: 50px; margin-bottom: 10px; display: block; }
        
        /* íƒ€ì´í‹€ ìƒ‰ìƒ ê²€ì •(#000)ìœ¼ë¡œ í†µì¼ */
        .logo-title { color: #000000; margin-bottom: 5px; line-height: 1.1; }
        
        /* ë‚´íƒ“ë„¤íƒ“ (ë‘ê»ê²Œ) */
        .title-bold { font-size: 38px; font-weight: 900; letter-spacing: -1.5px; display: block; }
        
        /* : ì´ê²Œ ë‚´ ì˜ëª»ì´ì•¼? (ì–‡ê²Œ & í¬ê¸° ì¡°ì •) */
        /* í•˜ë‹¨ 15pxë³´ë‹¤ í¬ê³  ê¸°ì¡´ë³´ë‹¤ ì‘ì€ 20px ì„¤ì • */
        .title-light { font-weight: 200; font-size: 20px; display: block; margin-top: 2px; }

        .logo-sub { font-size: 15px; color: #888; margin-top: 15px; }

        /* 3. ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ */
        .login-group { width: 100%; display: flex; flex-direction: column; gap: 15px; }
        .login-btn {
            width: 100%; height: 55px; border-radius: 12px; border: none;
            display: flex; align-items: center; justify-content: center;
            font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        
        .btn-kakao { background-color: #FEE500; color: #3c1e1e; }
        .btn-google { background-color: #ffffff; color: #757575; border: 1px solid #ddd; }

        .login-btn:active { transform: scale(0.98); opacity: 0.9; }

        /* ì•ˆë‚´ ë¬¸êµ¬ ê°•ì¡° ìŠ¤íƒ€ì¼ */
        .info-text { margin-top: 30px; font-size: 12px; color: #999; text-align: center; line-height: 1.6; }
        .highlight { color: white; background-color: #333; padding: 2px 6px; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="logo-area">
            <span class="logo-icon">âš–ï¸</span>
            <div class="logo-title">
                <span class="title-bold">ë‚´íƒ“ë„¤íƒ“</span>
                <span class="title-light">: ì´ê²Œ ë‚´ ì˜ëª»ì´ì•¼?</span>
            </div>
            <div class="logo-sub">ì–µìš¸í•œ ë§ˆìŒ, ì‹œì›í•œ íŒê²°</div>
        </div>

        <div class="login-group">
            <button class="login-btn btn-kakao" onclick="mockLogin('kakao')">
                ì¹´ì¹´ì˜¤ë¡œ ì‹œì‘í•˜ê¸°
            </button>
            <button class="login-btn btn-google" onclick="mockLogin('google')">
                êµ¬ê¸€ë¡œ ì‹œì‘í•˜ê¸°
            </button>
        </div>

        <p class="info-text">
            ë¡œê·¸ì¸ ì‹œ ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•˜ê²Œ ë˜ë©°,<br>
            ì„œë¹„ìŠ¤ ë¶„ì„ì„ ìœ„í•´ <span class="highlight">ë‚˜ì´ì™€ ì„±ë³„</span> ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
        </p>
    </div>

    <script>
        function mockLogin(platform) {
            const mockSocialId = platform + "_user_12345";
            const allUsers = JSON.parse(localStorage.getItem('registeredUsers') || '{}');
            
            if (allUsers[mockSocialId]) {
                alert("ë°˜ê°€ì›Œìš”! ë‹¤ì‹œ ì˜¤ì…¨êµ°ìš”.");
                localStorage.setItem('currentUser', JSON.stringify(allUsers[mockSocialId]));
                location.href = 'list.html';
            } else {
                alert("ì‹ ê·œ ê°€ì…ì„ í™˜ì˜í•©ë‹ˆë‹¤! ì¶”ê°€ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                sessionStorage.setItem('tempSocialId', mockSocialId);
                location.href = 'onboarding.html';
            }
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ì¸ - ë‚´íƒ“ë„¤íƒ“</title>
    <style>
        body { margin: 0; background-color: #f5f5f5; font-family: 'Pretendard', sans-serif; color: #333; }
        
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            background-color: #ffffff; position: relative;
            display: flex; flex-direction: column; align-items: center; padding-top: 60px; box-sizing: border-box;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }

        /* ğŸ”” ì•Œë¦¼ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
        .notification-header {
            position: absolute; top: 20px; right: 20px; z-index: 100;
        }
        .noti-btn {
            background: none; border: none; font-size: 24px; cursor: pointer; position: relative;
        }
        .noti-badge {
            position: absolute; top: -2px; right: -2px; background: red; color: white;
            font-size: 10px; width: 16px; height: 16px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-weight: bold;
            display: none; /* ì´ˆê¸°ê°’ ìˆ¨ê¹€ */
        }

        /* ğŸ“‚ ì•Œë¦¼ ì°½ ìŠ¤íƒ€ì¼ */
        .noti-dropdown {
            display: none; position: absolute; top: 55px; right: 20px; width: 280px;
            background: white; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border: 1px solid #eee; overflow-y: auto; max-height: 400px; z-index: 101;
        }
        .noti-item {
            padding: 15px; border-bottom: 1px solid #f9f9f9; font-size: 13px; line-height: 1.4;
        }
        .noti-item:last-child { border-bottom: none; }
        .noti-item .time { color: #999; font-size: 11px; margin-top: 5px; }
        .noti-title { font-weight: bold; margin-bottom: 3px; display: block; }

        /* ê¸°ì¡´ ì‹¤ì‹œê°„ ì ‘ì†ì ë° ìƒíƒœ ë°” */
        .live-status {
            background: rgba(0, 200, 0, 0.1); border: 1px solid #00aa00; color: #00aa00;
            padding: 6px 15px; border-radius: 20px; font-size: 13px; font-weight: bold; margin-bottom: 10px;
        }
        .user-status-bar {
            background: #f9f9f9; border: 1px solid rgba(255, 215, 0, 0.5);
            padding: 10px 20px; border-radius: 12px; display: flex; gap: 15px;
            font-size: 13px; margin-bottom: 30px; align-items: center; color: #333;
        }
        .rank-text { color: #9d4edd; font-weight: bold; }
        .coin-text { color: #b8860b; font-weight: bold; }

        .logo { font-size: 40px; font-weight: 900; margin-bottom: 40px; text-align: center; line-height: 1.2; color: #333; }
        .menu-group { width: 85%; display: flex; flex-direction: column; gap: 15px; }
        .menu-btn {
            background: #ffffff; border: 1px solid #ddd; padding: 20px; border-radius: 15px; color: #333;
            text-decoration: none; font-size: 18px; font-weight: bold; text-align: center; transition: 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="notification-header">
            <button class="noti-btn" onclick="toggleNoti(event)">
                ğŸ”” <span class="noti-badge" id="notiCount">0</span>
            </button>
            <div class="noti-dropdown" id="notiDropdown">
                </div>
        </div>

        <div class="live-status" id="liveUserBadge">â— ì‹¤ì‹œê°„ ì ‘ì† ë°°ì‹¬ì›: 120ëª…</div>

        <div class="user-status-bar">
            <div class="status-item"><span style="color: #666;">ë“±ê¸‰:</span> <span id="mainRank" class="rank-text">ë¡œë”© ì¤‘...</span></div>
            <div style="width: 1px; height: 12px; background: #ddd;"></div>
            <div class="status-item"><span style="color: #666;">ë³´ìœ :</span> <span class="coin-text">ğŸŸ¡ <span id="mainCoin">0</span></span></div>
        </div>

        <div class="logo">âš–ï¸<br>ë‚´íƒ“ë„¤íƒ“</div>

        <div class="menu-group">
            <a href="write.html" class="menu-btn">âš–ï¸ ì‚¬ê±´ ì ‘ìˆ˜í•˜ê¸°</a>
            <a href="list.html" class="menu-btn">ğŸ“œ ì‚¬ê±´ ê¸°ë¡ ì—´ëŒì‹¤</a>
            <a href="retry.html" class="menu-btn">ğŸ”¨ ì¬ì‹¬ íŒê²°ë‹¨</a>
            <a href="mypage.html" class="menu-btn">ğŸ‘¤ ë§ˆì´í˜ì´ì§€</a>
        </div>
    </div>

    <script>
        // 1. ì•Œë¦¼ í† ê¸€ ê¸°ëŠ¥
        function toggleNoti(event) {
            event.stopPropagation();
            const dropdown = document.getElementById('notiDropdown');
            const isVisible = dropdown.style.display === 'block';
            dropdown.style.display = isVisible ? 'none' : 'block';
            
            if (!isVisible) {
                // ì•Œë¦¼ì°½ ì—´ ë•Œ í™•ì¸í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  ë°°ì§€ ìˆ¨ê¹€
                document.getElementById('notiCount').style.display = 'none';
            }
        }

        window.onclick = function(event) {
            if (!event.target.closest('.notification-header')) {
                document.getElementById('notiDropdown').style.display = 'none';
            }
        }

        // 2. ì‹¤ì‹œê°„ ì•Œë¦¼ ìƒì„± ë° ì²´í¬ ë¡œì§ (ì¶”ê°€ë¨)
        function checkNewNotifications() {
            const cases = JSON.parse(localStorage.getItem('myCases') || '[]');
            let notifications = JSON.parse(localStorage.getItem('userNoti') || []);
            
            let hasNew = false;

            cases.forEach(item => {
                // íŒê²°ì´ ì¢…ë£Œ(isClosed)ë˜ì—ˆëŠ”ë° ì•„ì§ ì•Œë¦¼(notified)ì„ ì•ˆ ì¤€ ê²½ìš°
                if (item.isClosed && !item.notified) {
                    let msg = "";
                    // ë‚´ê°€ ì“´ ê¸€ì¸ ê²½ìš°
                    if (item.isMine) {
                        msg = `âš–ï¸ íŒê²°ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤: '${item.title}'ì˜ ìµœì¢… ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.`;
                    } 
                    // ë‚´ê°€ íˆ¬í‘œí•œ ê¸€ì¸ ê²½ìš°
                    else if (item.voted) {
                        msg = `ğŸ—³ï¸ íˆ¬í‘œ ê²°ê³¼ ì•Œë¦¼: ì°¸ì—¬í•˜ì‹  '${item.title}' íŒê²°ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`;
                    }

                    if (msg) {
                        notifications.unshift({ title: "íŒê²° ì¢…ë£Œ", content: msg, time: "ë°©ê¸ˆ ì „" });
                        item.notified = true; // ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€ í”Œë˜ê·¸
                        hasNew = true;
                    }
                }
            });

            if (hasNew) {
                localStorage.setItem('userNoti', JSON.stringify(notifications));
                localStorage.setItem('myCases', JSON.stringify(cases));
            }
            renderNotiList(notifications);
        }

        function renderNotiList(notifications) {
            const listContainer = document.getElementById('notiDropdown');
            const badge = document.getElementById('notiCount');

            if (notifications.length === 0) {
                listContainer.innerHTML = '<div class="noti-item" style="text-align:center; color:#999;">ìƒˆë¡œìš´ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                badge.style.display = 'none';
            } else {
                badge.innerText = notifications.length;
                badge.style.display = 'flex';
                listContainer.innerHTML = notifications.map(n => `
                    <div class="noti-item">
                        <span class="noti-title">${n.title}</span>
                        ${n.content}
                        <div class="time">${n.time}</div>
                    </div>
                `).join('');
            }
        }

        // 3. ê¸°ì¡´ ë°ì´í„° ë¡œë“œ ë¡œì§
        function updateLiveUsers() {
            const count = Math.floor(Math.random() * (350 - 150 + 1)) + 150;
            document.getElementById('liveUserBadge').innerText = `â— ì‹¤ì‹œê°„ ì ‘ì† ë°°ì‹¬ì›: ${count}ëª…`;
        }
        setInterval(updateLiveUsers, 4000);
        updateLiveUsers();

        function loadMainUserInfo() {
            const userData = JSON.parse(localStorage.getItem('userData')) || { coin: 1000 };
            document.getElementById('mainCoin').innerText = userData.coin.toLocaleString();
            
            const lp = parseInt(localStorage.getItem('userPoints') || '0');
            const badgeEl = document.getElementById('mainRank');
            
            let rankName = "ì‹ ì… ë°°ì‹¬ì›";
            if (lp >= 50000) rankName = "ëª…ì˜ˆ ëŒ€ë²•ê´€";
            else if (lp >= 15000) rankName = "ë¶€ì¥íŒì‚¬";
            else if (lp >= 5000) rankName = "í‰íŒì‚¬";
            else if (lp >= 1000) rankName = "ì‚¬ë²•ì—°ìˆ˜ìƒ";
            badgeEl.innerText = rankName;

            // ìœ ì € ì •ë³´ ë¡œë“œ í›„ ì•Œë¦¼ ì²´í¬ ì‹¤í–‰
            checkNewNotifications();
        }

        window.onload = loadMainUserInfo;
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ˆì´í˜ì´ì§€ - ë…¼ìŸì˜ íƒ‘</title>
    <style>
        /* 1. ë°°ê²½ í™”ì´íŠ¸ ë° í…ìŠ¤íŠ¸ ê²€ì • ì„¤ì • */
        body { margin: 0; background-color: #ffffff; font-family: 'Pretendard', sans-serif; color: #333333; }
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            display: flex; flex-direction: column; padding: 60px 20px; box-sizing: border-box;
            background-color: #ffffff;
        }
        .header { display: flex; align-items: center; margin-bottom: 30px; }
        .back-btn { font-size: 28px; color: #333; text-decoration: none; margin-right: 15px; font-weight: bold; }

        /* í”„ë¡œí•„ ì¹´ë“œ (í™”ì´íŠ¸ í…Œë§ˆì— ë§ì¶° ë°ê²Œ ì¡°ì •) */
        .profile-card { 
            background: #fdf7ff; border: 1px solid #e0aaff; 
            padding: 25px; border-radius: 20px; text-align: center; margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(157, 78, 221, 0.1);
        }
        .user-rank { font-size: 14px; color: #9d4edd; font-weight: bold; margin-bottom: 5px; display: block; }
        .user-name { font-size: 22px; font-weight: bold; color: #222; margin-bottom: 5px; display: block; }
        
        .user-lp { font-size: 13px; color: #666; font-weight: bold; margin-bottom: 15px; display: block; }

        /* í†µí•© ì½”ì¸ ë°•ìŠ¤ */
        .coin-box { 
            background: #ffffff; padding: 20px; border-radius: 15px; 
            border: 1px solid #ffd700; text-align: center; margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.2);
        }
        .coin-label { font-size: 13px; color: #b8860b; margin-bottom: 10px; font-weight: bold; }
        .coin-value { font-size: 28px; font-weight: bold; color: #333; }

        /* ë²„íŠ¼ */
        .action-btn { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; font-size: 14px; margin-bottom: 10px; }
        .btn-outline { background: #ffffff; color: #555; border: 1px solid #ddd; transition: 0.2s; }
        .btn-outline:active { background: #f5f5f5; }

        /* íƒ­ ë©”ë‰´ */
        .tab-menu { display: flex; gap: 20px; margin-top: 25px; border-bottom: 1px solid #eee; }
        .tab { padding: 10px 5px; cursor: pointer; color: #999; font-size: 15px; font-weight: bold; }
        .tab.active { color: #333; border-bottom: 2px solid #333; }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: #fff; width: 85%; max-width: 350px; padding: 25px; border-radius: 20px; color: #333; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="header">
            <a href="main.html" class="back-btn">â€¹</a>
            <h1 style="font-size: 20px; margin: 0; color: #222;">ë‚˜ì˜ ì¬íŒ ê¸°ë¡</h1>
        </div>

        <div class="profile-card">
            <span id="rankBadge" class="user-rank">Lv.1 ì‹ ì… ë°°ì‹¬ì›</span>
            <span class="user-name">ì •ì˜ë¡œìš´ ë°°ì‹¬ì› ë‹˜</span>
            
            <span class="user-lp">ëˆ„ì  ì ìˆ˜: <span id="myLPDisplay">0</span> LP</span>
            
            <div class="coin-box">
                <div class="coin-label">ë‚´ ë³´ìœ  ì½”ì¸</div>
                <div class="coin-value">ğŸŸ¡ <span id="myCoinDisplay">0</span></div>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="action-btn btn-outline" onclick="openModal('rankModal')">ğŸ“Š ë“±ê¸‰í‘œ</button>
                <button class="action-btn btn-outline" onclick="openModal('coinModal')">ğŸŸ¡ ì½”ì¸ ê°€ì´ë“œ</button>
            </div>
        </div>

        <div class="tab-menu">
            <div id="tabMy" class="tab active" onclick="switchTab('my')">ë‚´ê°€ ì“´ ê¸€</div>
            <div id="tabVoted" class="tab" onclick="switchTab('voted')">ì°¸ì—¬í•œ íŒê²°</div>
        </div>
        <div id="recordList" style="margin-top: 20px;"></div>
    </div>

    <div id="rankModal" class="modal">
        <div class="modal-content" style="border: 1px solid #9d4edd;">
            <h3 style="text-align:center; color:#9d4edd;">ğŸ›ï¸ ë“±ê¸‰ ê¸°ì¤€</h3>
            <table style="width:100%; color:#333; font-size:13px; margin-bottom:15px; border-collapse: collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.1 ì‹ ì… ë°°ì‹¬ì›</td><td style="text-align:right;">0+</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.2 ì‚¬ë²•ì—°ìˆ˜ìƒ</td><td style="text-align:right;">1,000+</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.3 í‰íŒì‚¬</td><td style="text-align:right;">5,000+</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.4 ë¶€ì¥íŒì‚¬</td><td style="text-align:right;">15,000+</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px 8px;">Lv.5 ëª…ì˜ˆ ëŒ€ë²•ê´€</td><td style="text-align:right;">50,000+</td></tr>
            </table>
            <div style="font-size: 12px; color: #666; line-height: 1.6; background: #f9f9f9; padding: 15px; border-radius: 10px; margin-top: 10px;">
                <b style="color: #9d4edd;">ğŸ’¡ ì ìˆ˜(LP) íšë“ ë°©ë²•</b><br>
                - íŒê²° ì„±ê³µ(ë‹¤ìˆ˜ê²° ìŠ¹ë¦¬): <span style="color:#222;">+100 LP</span><br>
                - íˆ¬í‘œ ì°¸ì—¬: <span style="color:#222;">+10 LP</span><br>
                - ëŒ“ê¸€ ì‘ì„±: <span style="color:#222;">+20 LP</span><br>
                - ë² ìŠ¤íŠ¸ ëŒ“ê¸€ ì„ ì •: <span style="color:#222;">+200 LP</span>
            </div>
            <button class="action-btn" style="background:#9d4edd; color:white; margin-top:15px;" onclick="closeModal('rankModal')">í™•ì¸</button>
        </div>
    </div>

    <div id="coinModal" class="modal">
        <div class="modal-content" style="border: 1px solid #ffd700;">
            <h3 style="text-align:center; color:#b8860b;">ğŸŸ¡ ì½”ì¸ ì´ìš© ê°€ì´ë“œ</h3>
            <div style="font-size: 13px; line-height: 1.8; color: #444;">
                â€¢ <b>íšë“:</b> íˆ¬í‘œ ë° ëŒ“ê¸€ ì°¸ì—¬ ì‹œ <b>+10ê°œ</b><br>
                â€¢ <b>ìˆ˜ëŸ‰:</b> í•˜ë£¨ì— ì–»ì„ ìˆ˜ ìˆëŠ” ì½”ì¸ ìµœëŒ€ ìˆ˜ëŸ‰ <b>100ê°œ</b><br><br>
                â€¢ <b>ì‚¬ê±´ ì ‘ìˆ˜:</b> ì§ˆë¬¸ ë“±ë¡ ì‹œ <b>-100ê°œ</b><br>
                â€¢ <b>ìµœì¢… ì¬ì‹¬:</b> ì¢…ë£Œëœ ì‚¬ê±´ ì¬ì‹¬ ì‹ ì²­ ì‹œ <b>-300ê°œ</b>
            </div>
            <button class="action-btn" style="background:#ffd700; color:#000; margin-top:20px;" onclick="closeModal('coinModal')">í™•ì¸</button>
        </div>
    </div>

    <script>
        let currentTab = 'my';

        function initUserData() {
            let userData = JSON.parse(localStorage.getItem('userData')) || { 
                coin: 1000, dailyEarned: 0, lastUpdateDate: new Date().toDateString() 
            };
            const today = new Date().toDateString();
            if (userData.lastUpdateDate !== today) {
                userData.dailyEarned = 0;
                userData.lastUpdateDate = today;
                localStorage.setItem('userData', JSON.stringify(userData));
            }
            return userData;
        }

        function refreshUI() {
            const user = initUserData();
            document.getElementById('myCoinDisplay').innerText = user.coin.toLocaleString();

            const points = parseInt(localStorage.getItem('userPoints') || '0');
            document.getElementById('myLPDisplay').innerText = points.toLocaleString();

            updateRankBadge(points);
            renderRecords();
        }

        function updateRankBadge(lp) {
            const badge = document.getElementById('rankBadge');
            let rankName = "Lv.1 ì‹ ì… ë°°ì‹¬ì›";
            if (lp >= 50000) rankName = "Lv.5 ëª…ì˜ˆ ëŒ€ë²•ê´€";
            else if (lp >= 15000) rankName = "Lv.4 ë¶€ì¥íŒì‚¬";
            else if (lp >= 5000) rankName = "Lv.3 í‰íŒì‚¬";
            else if (lp >= 1000) rankName = "Lv.2 ì‚¬ë²•ì—°ìˆ˜ìƒ";
            
            badge.innerText = rankName;
        }

        function renderRecords() {
            const listContainer = document.getElementById('recordList');
            const allCases = JSON.parse(localStorage.getItem('myCases') || '[]');
            listContainer.innerHTML = '';
            let filteredList = (currentTab === 'my') ? allCases : allCases.filter(c => c.voted === true);
            
            if (filteredList.length === 0) {
                listContainer.innerHTML = '<p style="text-align:center; color:#aaa; margin-top:50px; font-size:14px;">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            filteredList.forEach(item => {
                listContainer.insertAdjacentHTML('beforeend', `
                    <div style="background:#ffffff; padding:18px; border-radius:15px; margin-bottom:12px; cursor:pointer; border:1px solid #eee; box-shadow: 0 2px 5px rgba(0,0,0,0.02);" onclick="location.href='detail.html?id=${item.id}'">
                        <div style="font-weight:bold; color:#333;">${item.title}</div>
                        <div style="font-size:12px; color:#9d4edd; margin-top:8px; font-weight:600;">ìƒì„¸ ë³´ê¸° ></div>
                    </div>
                `);
            });
        }

        function switchTab(type) {
            currentTab = type;
            document.getElementById('tabMy').classList.toggle('active', type === 'my');
            document.getElementById('tabVoted').classList.toggle('active', type === 'voted');
            renderRecords();
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        window.onload = refreshUI;
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ë³´ ì…ë ¥ - ë‚´íƒ“ë„¤íƒ“</title>
    <style>
        body { margin: 0; background-color: #ffffff; font-family: 'Pretendard', sans-serif; color: #333333; }
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            display: flex; flex-direction: column; padding: 40px 25px; box-sizing: border-box;
        }

        .header { margin-bottom: 30px; }
        .step-title { font-size: 24px; font-weight: 800; margin-bottom: 10px; }
        .step-desc { font-size: 14px; color: #888; line-height: 1.5; }
        .highlight { color: white; font-weight: bold; background-color: #333; padding: 0 4px; border-radius: 4px; }

        .form-group { margin-bottom: 25px; }
        .label { display: block; font-size: 14px; font-weight: bold; margin-bottom: 8px; color: #555; }
        
        .input-field {
            width: 100%; height: 50px; border: 1px solid #ddd; border-radius: 10px;
            padding: 0 15px; box-sizing: border-box; font-size: 16px; outline: none;
        }
        .input-field:focus { border-color: #b8860b; }

        /* ê¸€ììˆ˜ ì œí•œ ì•ˆë‚´ í…ìŠ¤íŠ¸ */
        .limit-info { font-size: 11px; color: #999; margin-top: 5px; }

        .gender-group { display: flex; gap: 10px; }
        .gender-btn {
            flex: 1; height: 50px; border: 1px solid #ddd; border-radius: 10px;
            background: #fff; cursor: pointer; font-size: 15px; transition: 0.2s;
        }
        .gender-btn.active {
            background: #333; color: #fff; border-color: #333;
        }

        .submit-btn {
            margin-top: auto; width: 100%; height: 55px; background: #b8860b;
            color: #fff; border: none; border-radius: 12px; font-size: 18px;
            font-weight: bold; cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="header">
            <div class="step-title">ë°˜ê°€ì›Œìš”! ğŸ‘‹</div>
            <div class="step-desc">
                ì •í™•í•œ íŒê²° ë¶„ì„ì„ ìœ„í•´<br>
                <span class="highlight">ë‚˜ì´ì™€ ì„±ë³„</span>ì„ ë”± í•œ ë²ˆë§Œ ì•Œë ¤ì£¼ì„¸ìš”.
            </div>
        </div>

        <div class="form-group">
            <label class="label">ì‚¬ìš©í•  ì•„ì´ë””</label>
            <input type="text" id="nickname" class="input-field" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”">
            <div class="limit-info">í•œê¸€ ìµœëŒ€ 7ì / ì˜ë¬¸ ìµœëŒ€ 10ì (ìˆ«ì í¬í•¨ ê°€ëŠ¥)</div>
        </div>

        <div class="form-group">
            <label class="label">ì¶œìƒ ì—°ë„</label>
            <select id="birthYear" class="input-field">
                <option value="">ì—°ë„ ì„ íƒ</option>
            </select>
        </div>

        <div class="form-group">
            <label class="label">ì„±ë³„</label>
            <div class="gender-group">
                <button class="gender-btn" onclick="selectGender('ë‚¨')">ë‚¨ì„±</button>
                <button class="gender-btn" onclick="selectGender('ì—¬')">ì—¬ì„±</button>
            </div>
        </div>

        <button class="submit-btn" id="finishBtn" onclick="completeSignup()">ê°€ì… ì™„ë£Œ</button>
    </div>

    <script>
        let selectedGender = '';
        const tempSocialId = sessionStorage.getItem('tempSocialId');

        const yearSelect = document.getElementById('birthYear');
        for (let y = 2020; y >= 1950; y--) {
            const opt = document.createElement('option');
            opt.value = y;
            opt.innerText = `${y}ë…„ìƒ`;
            yearSelect.appendChild(opt);
        }

        function selectGender(gender) {
            selectedGender = gender;
            const btns = document.querySelectorAll('.gender-btn');
            btns.forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        // ë‹‰ë„¤ì„ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
        function validateNickname(name) {
            const korCount = (name.match(/[ã„±-ã…|ã…-ã…£|ê°€-í£]/g) || []).length;
            const otherCount = name.length - korCount;
            
            // í•œê¸€ì´ 1ìë¼ë„ ìˆìœ¼ë©´ í•œê¸€ ê¸°ì¤€(7ì), ì˜ë¬¸/ìˆ«ìë§Œ ìˆìœ¼ë©´ 10ì
            if (korCount > 0) {
                return name.length <= 7;
            } else {
                return name.length <= 10;
            }
        }

        function completeSignup() {
            const nickname = document.getElementById('nickname').value.trim();
            const birthYear = document.getElementById('birthYear').value;

            if (!nickname || !birthYear || !selectedGender) {
                alert("ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }

            if (!validateNickname(nickname)) {
                alert("ì•„ì´ë”” ê¸€ììˆ˜ê°€ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.\n(í•œê¸€ 7ì ë˜ëŠ” ì˜ë¬¸ 10ì)");
                return;
            }

            const allUsers = JSON.parse(localStorage.getItem('registeredUsers') || '{}');
            
            const newUser = {
                userId: tempSocialId,
                nickname: nickname,
                birthYear: birthYear,
                gender: selectedGender,
                coin: 500, // [2026-01-29] ê°€ì… ì¶•í•˜ ì½”ì¸ ìˆ˜ì •
                dailyEarned: 0,
                lastUpdateDate: new Date().toDateString()
            };

            allUsers[tempSocialId] = newUser;
            localStorage.setItem('registeredUsers', JSON.stringify(allUsers));
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            
            alert("ê°€ì…ì„ ì¶•í•˜í•©ë‹ˆë‹¤! ê¸ˆìƒ‰ ì½”ì¸ 500ê°œê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.");
            
            // ê°€ì… í›„ ë©”ì¸ í™”ë©´(index.html)ìœ¼ë¡œ ì´ë™
            location.href = 'index.html'; 
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìµœì¢… íŒê²° - ë‚´íƒ“ë„¤íƒ“</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        body { margin: 0; background-color: #f0f0f0; font-family: 'Pretendard', sans-serif; color: #333; }
        .mobile-container {
            width: 100%; max-width: 430px; margin: 0 auto; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; padding: 40px 20px; box-sizing: border-box;
        }

        /* ê³µìœ ë  ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        #resultCard {
            width: 100%; background: #ffffff; border-radius: 20px; padding: 30px 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); box-sizing: border-box;
            position: relative; overflow: hidden; border: 2px solid #333;
        }

        .card-header { text-align: center; font-size: 14px; font-weight: bold; color: #b8860b; margin-bottom: 10px; }
        .case-title { text-align: center; font-size: 20px; font-weight: 800; margin-bottom: 25px; line-height: 1.4; }

        /* ê·¸ë˜í”„ ì˜ì—­ */
        .vote-container { margin-bottom: 30px; }
        .vote-labels { display: flex; justify-content: space-between; font-size: 14px; font-weight: bold; margin-bottom: 8px; }
        .vote-bar-bg { width: 100%; height: 35px; background: #eee; border-radius: 10px; display: flex; overflow: hidden; }
        .bar-my { background: #ff4d4d; color: white; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: bold; transition: 1s; }
        .bar-your { background: #4d79ff; color: white; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: bold; transition: 1s; }

        /* ê²°ê³¼ ë¬¸êµ¬ */
        .verdict-box {
            text-align: center; background: #333; color: white; padding: 20px 15px;
            border-radius: 12px; font-size: 18px; font-weight: bold; margin-bottom: 25px;
            line-height: 1.5;
        }
        .white-text { color: white; } /* [2026-01-29] ê°•ì¡°ìƒ‰ ì ìš© */

        .best-comment-box {
            background: #f9f9f9; border-left: 4px solid #b8860b; padding: 15px; font-size: 14px; line-height: 1.6;
        }
        .comment-label { font-size: 12px; color: #888; font-weight: bold; margin-bottom: 5px; }

        /* í•˜ë‹¨ ë²„íŠ¼ */
        .action-area { width: 100%; margin-top: 30px; display: flex; flex-direction: column; gap: 10px; }
        .btn {
            width: 100%; height: 55px; border-radius: 12px; border: none; font-size: 16px; font-weight: bold; cursor: pointer;
        }
        .btn-share { background: #333; color: white; } /* ê³µìœ í•˜ê¸° ë²„íŠ¼ */
        .btn-save { background: #b8860b; color: white; }
        .btn-home { background: #eee; color: #333; }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div id="resultCard">
            <div class="card-header">FINAL VERDICT REPORT</div>
            <div id="displayTitle" class="case-title">ì‚¬ê±´ ì œëª©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            
            <div class="vote-container">
                <div class="vote-labels">
                    <span>ë‚´ íƒ“</span>
                    <span>ë„¤ íƒ“</span>
                </div>
                <div class="vote-bar-bg">
                    <div id="barMy" class="bar-my" style="width: 50%">0%</div>
                    <div id="barYour" class="bar-your" style="width: 50%">0%</div>
                </div>
            </div>

            <div class="verdict-box">
                ë°°ì‹¬ì›ë‹¨ ìµœì¢… íŒê²°: <br>
                <span id="finalVerdict" class="white-text">ë¶„ì„ ì¤‘...</span>
            </div>

            <div class="best-comment-box">
                <div class="comment-label">BEST JURY COMMENT</div>
                <div id="bestCommentText">ê°€ì¥ ê³µê°ì„ ë§ì´ ë°›ì€ í‰ê²°ì´ ì´ê³³ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
        </div>

        <div class="action-area">
            <button class="btn btn-share" onclick="shareResult()">ğŸ“¤ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ê³  50ì½”ì¸ ë°›ê¸°</button>
            <button class="btn btn-save" onclick="downloadResult()">ğŸ“¸ íŒê²°ë¬¸ ì´ë¯¸ì§€ë¡œ ì €ì¥í•˜ê¸°</button>
            <button class="btn btn-home" onclick="location.href='index.html'">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </div>

    <script>
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const caseId = urlParams.get('id');
            const savedCases = JSON.parse(localStorage.getItem('myCases') || '[]');
            
            const targetCase = savedCases.find(c => c.id == caseId);

            if (targetCase) {
                const myVotes = targetCase.voteCount.my || 0;
                const yourVotes = targetCase.voteCount.your || 0;
                const total = myVotes + yourVotes || 1;

                const myPercent = Math.round((myVotes / total) * 100);
                const yourPercent = 100 - myPercent;

                document.getElementById('displayTitle').innerText = `"${targetCase.title}"`;
                document.getElementById('barMy').style.width = myPercent + '%';
                document.getElementById('barMy').innerText = myPercent + '%';
                document.getElementById('barYour').style.width = yourPercent + '%';
                document.getElementById('barYour').innerText = yourPercent + '%';

                // --- [ë‚´ íƒ“ ë¹„ìœ¨ë³„ í’ì ë¬¸êµ¬ ì„¤ì •] ---
                const verdictSpan = document.getElementById('finalVerdict');
                let message = "";

                if (myPercent < 50) {
                    message = "ê±°ë´, ë‚´ ì˜ëª» ì•„ë‹ˆë¼ê³  í–ˆì§€? ğŸ˜";
                } else if (myPercent >= 50 && myPercent < 55) {
                    message = "í .. ì˜ì˜ëª»ì„ ë”°ì§€ê¸° ì°¸ ì• ë§¤í•˜ë„¤ìš”. ë„ê¸´ê°œê¸´?";
                } else if (myPercent >= 55 && myPercent < 65) {
                    message = "í¬ê²Œ ì˜ëª»í•œ ê±´ ì•„ë‹ˆì§€ë§Œ.. ì†”ì§íˆ ë‹˜ ì˜ëª»ì´ ë§ê¸´ í•œ ë“¯? ğŸ¤”";
                } else if (myPercent >= 65 && myPercent < 75) {
                    message = "ì´ ì •ë„ë©´ ë³¸ì¸ë„ ì•Œ í…ë°? ìŠ¬ìŠ¬ ì–‘ì‹¬ì´ ì°”ë¦´ ì‹œê°„ì…ë‹ˆë‹¤.";
                } else if (myPercent >= 75 && myPercent < 85) {
                    message = "ì™€.. ì‹¤í™”ì¸ê°€ìš”? ë°°ì‹¬ì› ëŒ€ë‹¤ìˆ˜ê°€ ë‹˜ íƒ“ì´ë¼ê³  ì†Œë¦¬ ì§€ë¥´ëŠ” ì¤‘!";
                } else {
                    message = "ë‚¨ íƒ“ ì§€ë¦¬êµ¬ìš”~ ì´ ì •ë„ë©´ ê±°ì˜ ì˜ˆìˆ  ì ìˆ˜ ë“œë ¤ì•¼ í•  íŒ ğŸ‘";
                }

                verdictSpan.innerText = message;

                if (targetCase.comments && targetCase.comments.length > 0) {
                    document.getElementById('bestCommentText').innerText = targetCase.comments[0].text;
                }
            }
        };

        // ì½”ì¸ ì§€ê¸‰ ë¡œì§
        function awardCoin(amount) {
            let userData = JSON.parse(localStorage.getItem('userData')) || { coin: 0 };
            userData.coin += amount;
            localStorage.setItem('userData', JSON.stringify(userData));
            alert(`ğŸª™ ê³µìœ  ë³´ìƒìœ¼ë¡œ ê¸ˆìƒ‰ ì½”ì¸ ${amount}ê°œê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        // ì´ë¯¸ì§€ íŒŒì¼ë¡œ ê³µìœ í•˜ëŠ” ê¸°ëŠ¥
        async function shareResult() {
            const card = document.getElementById('resultCard');
            const canvas = await html2canvas(card, { scale: 2 });
            const dataUrl = canvas.toDataURL('image/png');
            
            const response = await fetch(dataUrl);
            const blob = await response.blob();
            const file = new File([blob], 'verdict_result.png', { type: 'image/png' });

            if (navigator.canShare && navigator.canShare({ files: [file] })) {
                try {
                    await navigator.share({
                        files: [file],
                        title: 'ë‚´íƒ“ë„¤íƒ“ íŒê²° ê²°ê³¼',
                        text: 'ì´ íŒê²° ê²°ê³¼ ì¢€ ë´ì£¼ì„¸ìš”!'
                    });
                    // ê³µìœ  ì°½ì´ ì„±ê³µì ìœ¼ë¡œ í˜¸ì¶œë˜ë©´ ì½”ê¸‰ ì§€ê¸‰
                    awardCoin(50);
                } catch (err) { 
                    console.log("ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì‹¤íŒ¨:", err); 
                }
            } else {
                alert("í˜„ì¬ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ê³µìœ í•˜ê¸°ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ ì €ì¥ ê¸°ëŠ¥ì„ ì´ìš©í•´ì£¼ì„¸ìš”!");
            }
        }

        // ì´ë¯¸ì§€ íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥
        function downloadResult() {
            const card = document.getElementById('resultCard');
            html2canvas(card, { scale: 2, backgroundColor: "#ffffff" }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'ë‚´íƒ“ë„¤íƒ“_íŒê²°ë³´ê³ ì„œ.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
                alert("íŒê²°ë¬¸ ì´ë¯¸ì§€ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
            });
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¬ì‹¬ íŒê²°ë‹¨ - ë‚´íƒ“ë„¤íƒ“</title>
    <style>
        body { margin: 0; background-color: #333; font-family: 'Pretendard', sans-serif; animation: fadeIn 0.8s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            background-image: url('images/bg.png'); background-size: cover; padding: 100px 20px 20px 20px; box-sizing: border-box;
        }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; color: white; }
        .back-btn { font-size: 28px; text-decoration: none; color: white; font-weight: bold; }
        .retry-card {
            background: rgba(0, 0, 0, 0.4); border: 1px solid #7b2cbf; border-radius: 18px; 
            padding: 20px; margin-bottom: 30px; color: white; position: relative; overflow: visible !important;
        }
        .retry-tag { position: absolute; top: -12px; right: 15px; background: #ff4d4d; color: white; padding: 5px 14px; border-radius: 20px; font-size: 11px; font-weight: bold; z-index: 100; }
        .retry-title { font-size: 17px; font-weight: bold; color: #e0aaff; margin-bottom: 10px; }
        .retry-info { font-size: 12px; color: #ffffff; font-weight: bold; margin-top: 15px; display: flex; justify-content: space-between; }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="header">
            <a href="main.html" class="back-btn">â€¹</a>
            <h1 style="font-size: 20px; margin:0;">ìµœì¢… ì¬ì‹¬ íŒê²°ë‹¨</h1>
            <div style="width: 28px;"></div>
        </div>

        <div id="retryList"></div>
    </div>

    <script>
        window.onload = function() {
            const list = document.getElementById('retryList');
            const savedCases = JSON.parse(localStorage.getItem('myCases') || '[]');
            
            // ì¬ì‹¬ ì¡°ê±´(isRetryê°€ trueì¸ ê²ƒë§Œ) í•„í„°ë§
            const retryCases = savedCases.filter(c => c.isRetry === true);

            if (retryCases.length === 0) {
                list.innerHTML = '<p style="color:white; text-align:center; margin-top:100px;">í˜„ì¬ ì¬ì‹¬ ì¤‘ì¸ ì‚¬ê±´ì´ ì—†ìŠµë‹ˆë‹¤.<br><br><small>(ì¢‹ì•„ìš” 10ê°œ ì´ìƒ ì‹œ ì¬ì‹¬ ìë™ ìƒì •)</small></p>';
                return;
            }

            retryCases.forEach(item => {
                const html = `
                    <div class="retry-card" onclick="location.href='detail.html?id=${item.id}'">
                        <div class="retry-tag">ì¬ì‹¬ ì§„í–‰ ì¤‘</div>
                        <div class="retry-title">${item.title}</div>
                        <div style="font-size:14px; color:#eee;">${item.content.substring(0, 50)}...</div>
                        <div class="retry-info">
                            <span>â¤ï¸ ê´€ì‹¬ë„: ${item.likes}</span>
                            <span>íŒê²° ì¬ìš”ì²­ë¨</span>
                        </div>
                    </div>
                `;
                list.insertAdjacentHTML('beforeend', html);
            });
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ê±´ ì ‘ìˆ˜ - ë‚´íƒ“ë„¤íƒ“</title>
    <style>
        body { 
            margin: 0; 
            background-color: #ffffff; 
            font-family: 'Pretendard', sans-serif; 
            color: #333333; 
        }
        .mobile-container {
            width: 100%; max-width: 430px; min-height: 100vh; margin: 0 auto;
            display: flex; flex-direction: column; padding: 60px 20px; box-sizing: border-box;
            background-color: #ffffff;
        }
        .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 30px; }
        .back-btn { font-size: 28px; color: #333; text-decoration: none; font-weight: bold; }
        
        .my-coin-status {
            background: #f8f9fa; padding: 8px 15px; border-radius: 20px;
            border: 1px solid #eeeeee; font-size: 14px; display: flex; align-items: center; gap: 8px;
        }

        .form-group { margin-bottom: 20px; }
        label { display: block; font-size: 14px; margin-bottom: 8px; color: #555; font-weight: bold; }
        
        input, textarea {
            width: 100%; background: #ffffff; border: 1px solid #dddddd;
            border-radius: 12px; padding: 15px; color: #333; box-sizing: border-box; font-size: 16px;
        }
        input::placeholder, textarea::placeholder { color: #aaaaaa; }
        textarea { height: 200px; resize: none; }

        .time-options { display: flex; gap: 10px; }
        .time-options label { flex: 1; margin: 0; }
        .time-options input { display: none; }
        .time-box {
            background: #f1f1f1; border: 1px solid #dddddd;
            padding: 12px; border-radius: 10px; text-align: center; cursor: pointer; color: #666;
        }
        input:checked + .time-box {
            background: #333; border-color: #333; color: white; font-weight: bold;
        }

        .submit-btn {
            width: 100%; background: #ff4d4d; color: white; border: none; padding: 18px;
            border-radius: 15px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px;
        }
        .coin-info { text-align: center; font-size: 13px; color: #666; margin-top: 15px; }
        .highlight-text { color: white; background-color: #333; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div class="header">
            <a href="index.html" class="back-btn">â€¹</a>
            <div class="my-coin-status">
                <span style="color: #b8860b;">ğŸŸ¡ ê¸ˆìƒ‰ ì½”ì¸ ë³´ìœ ëŸ‰</span>
                <span id="currentGold" style="font-weight: bold; color: #333;">0</span>
            </div>
        </div>

        <div class="form-group">
            <label>ì‚¬ê±´ ì œëª©</label>
            <input type="text" id="caseTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
        </div>

        <div class="form-group">
            <label>ìƒì„¸ ë‚´ìš©</label>
            <textarea id="caseContent" placeholder="ìƒì„¸ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
        </div>

        <div class="form-group">
            <label>íŒê²° ì œí•œ ì‹œê°„</label>
            <div class="time-options">
                <label><input type="radio" name="limitTime" value="5" checked><div class="time-box">5ë¶„</div></label>
                <label><input type="radio" name="limitTime" value="30"><div class="time-box">30ë¶„</div></label>
                <label><input type="radio" name="limitTime" value="60"><div class="time-box">1ì‹œê°„</div></label>
            </div>
        </div>

        <button class="submit-btn" onclick="saveCase()">ì¬íŒ ì‹œì‘í•˜ê¸° (ğŸŸ¡100)</button>
        <p class="coin-info">ì‚¬ê±´ ì ‘ìˆ˜ ì‹œ <span class="highlight-text">ê¸ˆìƒ‰ ì½”ì¸ 100ê°œ</span>ê°€ ì†Œëª¨ë©ë‹ˆë‹¤.</p>
    </div>

    <script>
        function getUserData() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return { nickname: "ìµëª…", coin: 0 };
            return currentUser;
        }

        function updateCoinDisplay() {
            const user = getUserData();
            document.getElementById('currentGold').innerText = (user.coin || 0).toLocaleString();
        }

        function saveCase() {
            const title = document.getElementById('caseTitle').value;
            const content = document.getElementById('caseContent').value;
            const minutes = document.querySelector('input[name="limitTime"]:checked').value;
            
            const allUsers = JSON.parse(localStorage.getItem('registeredUsers') || '{}');
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));

            if (!currentUser) {
                alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return;
            }

            // 1. ì¤‘ë³µ ì‘ì„± ì œí•œ ë¡œì§ ì¶”ê°€
            const cases = JSON.parse(localStorage.getItem('myCases') || '[]');
            const now = Date.now();

            // ë‚´ê°€ ì“´ ê¸€ ì¤‘ ì•„ì§ íŒê²°ì´ ëë‚˜ì§€ ì•Šì€ ê¸€ì´ ìˆëŠ”ì§€ íƒìƒ‰
            const ongoingCase = cases.find(item => item.authorName === currentUser.nickname && item.endTime > now);

            if (ongoingCase) {
                const remainingMin = Math.ceil((ongoingCase.endTime - now) / 60000);
                alert(`í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì¬íŒì´ ìˆìŠµë‹ˆë‹¤.\níŒê²° ì¢…ë£Œê¹Œì§€ ì•½ ${remainingMin}ë¶„ ë‚¨ì•˜ìŠµë‹ˆë‹¤.\nê¸°ì¡´ ì¬íŒì´ ëë‚œ í›„ ìƒˆ ì‚¬ê±´ì„ ì ‘ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
                return;
            }

            // 2. ì½”ì¸ ë° í•„ìˆ˜ ì…ë ¥ ì²´í¬
            if (currentUser.coin < 100) {
                alert("ê¸ˆìƒ‰ ì½”ì¸ì´ ë¶€ì¡±í•©ë‹ˆë‹¤! (í•„ìš”: 100ê°œ)");
                return;
            }

            if (!title.trim() || !content.trim()) {
                alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            // 3. ì½”ì¸ ì°¨ê° ë° ì „ì²´ ìœ ì € ë°ì´í„° ì—…ë°ì´íŠ¸
            currentUser.coin -= 100;
            allUsers[currentUser.userId] = currentUser; 
            localStorage.setItem('registeredUsers', JSON.stringify(allUsers));
            localStorage.setItem('currentUser', JSON.stringify(currentUser));

            // 4. ì‚¬ê±´ ì €ì¥ (ì‘ì„±ì ë‹‰ë„¤ì„ í¬í•¨)
            cases.unshift({
                id: Date.now(),
                authorName: currentUser.nickname,
                title: title,
                content: content,
                endTime: Date.now() + (minutes * 60 * 1000),
                likes: 0,
                voteCount: { my: 0, your: 0 },
                comments: [],
                voted: false,
                isMine: true
            });
            localStorage.setItem('myCases', JSON.stringify(cases));

            alert("ì‚¬ê±´ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! ê¸ˆìƒ‰ ì½”ì¸ 100ê°œê°€ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.");
            location.href = 'list.html';
        }

        updateCoinDisplay();
    </script>
</body>
</html>
